{# vim: set ts=2 sw=2 sts=2 et: #}

{% if not this.getParam('fieldOnly') %}
  <div class="{{ this.getLabelContainerClass() }}">
    <label for="{{ this.getFieldId() }}" title="{{ this.getFormattedLabel()|raw }}">
      {{ this.getFormattedLabel() }}{% if this.getParam('useColon') %}:{% endif %}
      {% if this.hasLabelHelp() %}
        {{ widget('\\XLite\\View\\Tooltip', text=t(this.getParam('labelHelp')), helpWidget=this.getParam('labelHelpWidget'), isImageTag='true', className='help-icon') }}
      {% endif %}
    </label>
  </div>
  <div class="star">{% if this.getParam('required') %}*{% else %}&nbsp;{% endif %}</div>
{% endif %}

<div class="{{ this.getValueContainerClass() }}">
  {% include this.getDir() ~ '/' ~ this.getFieldTemplate() %}
  {% if this.hasHelp() %}
  <div class="help-wrapper">
    {{ widget('\\XLite\\View\\Tooltip', text=t(this.getParam('help')), helpWidget=this.getParam('helpWidget'), isImageTag='true', className='help-icon') }}
  </div>
    {% endif %}
  {% if this.getParam('comment') %}
    <div class="form-field-comment {{ this.getFieldId() }}-comment">{{ t(this.getParam('comment'))|raw }}</div>
  {% endif %}
  {% if this.getFormFieldJSData() %}{{ this.displayCommentedData(this.getFormFieldJSData()) }}{% endif %}
  {% if this.getInlineJSCode() %}
    <script type="text/javascript">{{ this.getInlineJSCode()|raw }}</script>
  {% endif %}
</div>

{% if this.isStatusSwitcherVisible() %}
  <div class="magictoolbox-option-status">
    <a href="#" {{ this.printTagAttributes(this.getStatusSwitcherTagAttributes())|raw }}>
      <div><span class="svg">{{ this.getSVGImage('images/check.svg')|raw }}</span></div>
    </a>
  </div>
{% endif %}

{% if not this.getParam('fieldOnly') %}
  <div class="clear"></div>
{% endif %}
